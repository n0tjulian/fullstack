(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(2),u=n(16),r=n.n(u),a=n(7),i=n(3),o=n(4),s=n.n(o),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=n(0),m=function(e){var t=e.newNameValue,n=e.updateInputFieldFunction,c=e.newNumberValue,u=e.updateNumberFieldFunction,r=e.addPersonFunction;return Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsx)("h3",{children:"Add someone new:"}),Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:t,onChange:n})]}),Object(h.jsxs)("div",{children:["Number: ",Object(h.jsx)("input",{value:c,onChange:u})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.searchFilter,n=e.filterFunction;return Object(h.jsx)("div",{children:Object(h.jsx)("input",{value:t,onChange:n})})},O=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:"Numbers"}),e.people.map((function(t){return Object(h.jsx)(v,{person:t,deletePerson:e.deletePerson},t.id)}))]})},v=function(e){var t=e.person,n=e.deletePerson;return Object(h.jsx)("div",{children:Object(h.jsxs)("p",{children:[t.name," ",t.number," ",Object(h.jsx)("button",{value:t.id,onClick:n,children:"delete"})]})})},x=function(e){var t=e.message,n=e.positive;return null===t?null:n?Object(h.jsx)("div",{className:"success",children:t}):Object(h.jsx)("div",{className:"error",children:t})},F=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],r=Object(c.useState)(""),o=Object(i.a)(r,2),s=o[0],l=o[1],v=Object(c.useState)(""),F=Object(i.a)(v,2),g=F[0],w=F[1],N=Object(c.useState)(""),k=Object(i.a)(N,2),y=k[0],P=k[1],S=Object(c.useState)(null),C=Object(i.a)(S,2),I=C[0],T=C[1],D=Object(c.useState)(null),V=Object(i.a)(D,2),E=V[0],J=V[1];Object(c.useEffect)((function(){d().then((function(e){u(e)}))}),[]);var L=n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(x,{message:I,positive:!1}),Object(h.jsx)(x,{message:E,positive:!0}),Object(h.jsx)(p,{searchFilter:y,filterFunction:function(e){e.preventDefault(),P(e.target.value)}}),Object(h.jsx)(m,{newNameValue:s,updateInputFieldFunction:function(e){e.preventDefault(),l(e.target.value)},newNumberValue:g,updateNumberFieldFunction:function(e){e.preventDefault(),w(e.target.value)},addPersonFunction:function(e){e.preventDefault();var t={name:s,number:g};if(n.some((function(e){return e.name===s}))){var c=n.filter((function(e){return e.name===s}));alert("".concat(s," is already in the phonebook, would you like to replace the number?")),b(c[0].id,t).then((function(e){J("".concat(s,"'s number has been changed")),setTimeout((function(){J(null)}),5e3);var r=n.map((function(e){return e.id===c[0].id&&(e=Object(a.a)(Object(a.a)({},t),{},{id:c[0].id})),e}));u(r),l(""),w("")})).catch((function(e){T("".concat(s," has been removed from the server")),setTimeout((function(){T(null)}),5e3);var t=n.filter((function(e){return e.name!==s}));u(t),l(""),w("")}))}else j(t).then((function(e){u(n.concat(e)),J("".concat(e.name," has been added successfully")),setTimeout((function(){J(null)}),5e3),l(""),w("")}))}}),Object(h.jsx)(O,{people:L,deletePerson:function(e){var t=n.find((function(t){if(parseInt(t.id)===parseInt(e.target.value))return t}));alert("do you want to delete ".concat(t.name)),f(t.id).then((function(e){J("".concat(t.name," has been deleted")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){T("that entry has already been deleted"),setTimeout((function(){T(null)}),5e3)}));var c=n.filter((function(e){return e.id!==t.id}));u(c)}})]})};n(41);r.a.render(Object(h.jsx)(F,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.c5429116.chunk.js.map